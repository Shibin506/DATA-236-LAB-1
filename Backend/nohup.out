/Users/spartan/Documents/DATA-236-LAB-1/Backend/src/services/favoriteService.js:42
        match: { is_active: true },
             ^

SyntaxError: Unexpected token ':'
    at wrapSafe (node:internal/modules/cjs/loader:1691:18)
    at Module._compile (node:internal/modules/cjs/loader:1734:20)
    at Object..js (node:internal/modules/cjs/loader:1893:10)
    at Module.load (node:internal/modules/cjs/loader:1480:32)
    at Module._load (node:internal/modules/cjs/loader:1299:12)
    at TracingChannel.traceSync (node:diagnostics_channel:328:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:244:24)
    at Module.require (node:internal/modules/cjs/loader:1503:12)
    at require (node:internal/modules/helpers:152:16)
    at Object.<anonymous> (/Users/spartan/Documents/DATA-236-LAB-1/Backend/src/controllers/favoriteController.js:1:25)

Node.js v24.11.0
‚úÖ Using MongoDB session store
(node:73795) [MONGOOSE] Warning: Duplicate schema index on {"email":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:73795) [MONGOOSE] Warning: Duplicate schema index on {"username":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
‚úÖ MongoDB connected successfully
‚úÖ Database connected successfully
MongoDB already connected
‚úÖ MongoDB initialized - schemas managed by Mongoose
‚úÖ Database tables initialized successfully
{"level":"ERROR","timestamp":"2025-11-24T01:35:12.631Z","logger":"kafkajs","message":"[Connection] Connection error: ","broker":"localhost:29092","clientId":"airbnb-backend","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)"}
{"level":"ERROR","timestamp":"2025-11-24T01:35:12.634Z","logger":"kafkajs","message":"[BrokerPool] Failed to connect to seed broker, trying another broker from the list: Connection error: ","retryCount":0,"retryTime":269}
{"level":"ERROR","timestamp":"2025-11-24T01:35:12.906Z","logger":"kafkajs","message":"[Connection] Connection error: ","broker":"localhost:29092","clientId":"airbnb-backend","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)"}
{"level":"ERROR","timestamp":"2025-11-24T01:35:12.906Z","logger":"kafkajs","message":"[BrokerPool] Failed to connect to seed broker, trying another broker from the list: Connection error: ","retryCount":1,"retryTime":644}
{"level":"ERROR","timestamp":"2025-11-24T01:35:13.552Z","logger":"kafkajs","message":"[Connection] Connection error: ","broker":"localhost:29092","clientId":"airbnb-backend","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)"}
{"level":"ERROR","timestamp":"2025-11-24T01:35:13.556Z","logger":"kafkajs","message":"[BrokerPool] Failed to connect to seed broker, trying another broker from the list: Connection error: ","retryCount":2,"retryTime":1484}
{"level":"ERROR","timestamp":"2025-11-24T01:35:15.044Z","logger":"kafkajs","message":"[Connection] Connection error: ","broker":"localhost:29092","clientId":"airbnb-backend","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)"}
{"level":"ERROR","timestamp":"2025-11-24T01:35:15.045Z","logger":"kafkajs","message":"[BrokerPool] Failed to connect to seed broker, trying another broker from the list: Connection error: ","retryCount":3,"retryTime":3364}
{"level":"ERROR","timestamp":"2025-11-24T01:35:18.412Z","logger":"kafkajs","message":"[Connection] Connection error: ","broker":"localhost:29092","clientId":"airbnb-backend","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)"}
{"level":"ERROR","timestamp":"2025-11-24T01:35:18.413Z","logger":"kafkajs","message":"[BrokerPool] Failed to connect to seed broker, trying another broker from the list: Connection error: ","retryCount":4,"retryTime":6342}
{"level":"ERROR","timestamp":"2025-11-24T01:35:24.758Z","logger":"kafkajs","message":"[Connection] Connection error: ","broker":"localhost:29092","clientId":"airbnb-backend","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)"}
{"level":"ERROR","timestamp":"2025-11-24T01:35:24.759Z","logger":"kafkajs","message":"[BrokerPool] Failed to connect to seed broker, trying another broker from the list: Connection error: ","retryCount":5,"retryTime":11568}
‚ö†Ô∏è Kafka producer failed to connect: Connection error: 

üöÄ Airbnb Backend Server Started Successfully!
üìç Server running on: http://localhost:3001
üåç Environment: development
üìä Health check: http://localhost:3001/health
‚è∞ Started at: 11/23/2025, 5:35:24 PM

Get properties error: CastError: Cast to ObjectId failed for value "11" (type number) at path "property_id" for model "PropertyImage"
    at SchemaObjectId.cast (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/schema/objectId.js:253:11)
    at SchemaType.applySetters (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/schemaType.js:1280:12)
    at SchemaType.castForQuery (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/schemaType.js:1706:17)
    at cast (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/cast.js:390:32)
    at Query.cast (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/query.js:5016:12)
    at Query._castConditions (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/query.js:2380:10)
    at model.Query._find (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/query.js:2407:8)
    at model.Query.exec (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/query.js:4627:80)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async PropertyService.getAllProperties (/Users/spartan/Documents/DATA-236-LAB-1/Backend/src/services/propertyService.js:50:22) {
  stringValue: '"11"',
  messageFormat: undefined,
  kind: 'ObjectId',
  value: 11,
  path: 'property_id',
  reason: BSONError: input must be a 24 character hex string, 12 byte Uint8Array, or an integer
      at new ObjectId (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/node_modules/bson/lib/bson.cjs:2565:23)
      at castObjectId (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/cast/objectid.js:25:12)
      at SchemaObjectId.cast (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/schema/objectId.js:251:12)
      at SchemaType.applySetters (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/schemaType.js:1280:12)
      at SchemaType.castForQuery (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/schemaType.js:1706:17)
      at cast (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/cast.js:390:32)
      at Query.cast (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/query.js:5016:12)
      at Query._castConditions (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/query.js:2380:10)
      at model.Query._find (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/query.js:2407:8)
      at model.Query.exec (/Users/spartan/Documents/DATA-236-LAB-1/Backend/node_modules/mongoose/lib/query.js:4627:80),
  valueType: 'number'
}
üõë SIGTERM received, shutting down gracefully
‚úÖ Using MongoDB session store
(node:77315) [MONGOOSE] Warning: Duplicate schema index on {"email":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
(Use `node --trace-warnings ...` to show where the warning was created)
(node:77315) [MONGOOSE] Warning: Duplicate schema index on {"username":1} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.
‚úÖ MongoDB connected successfully
‚úÖ Database connected successfully
MongoDB already connected
‚úÖ MongoDB initialized - schemas managed by Mongoose
‚úÖ Database tables initialized successfully
{"level":"ERROR","timestamp":"2025-11-24T01:36:28.498Z","logger":"kafkajs","message":"[Connection] Connection error: ","broker":"localhost:29092","clientId":"airbnb-backend","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)"}
{"level":"ERROR","timestamp":"2025-11-24T01:36:28.501Z","logger":"kafkajs","message":"[BrokerPool] Failed to connect to seed broker, trying another broker from the list: Connection error: ","retryCount":0,"retryTime":289}
{"level":"ERROR","timestamp":"2025-11-24T01:36:28.793Z","logger":"kafkajs","message":"[Connection] Connection error: ","broker":"localhost:29092","clientId":"airbnb-backend","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)"}
{"level":"ERROR","timestamp":"2025-11-24T01:36:28.793Z","logger":"kafkajs","message":"[BrokerPool] Failed to connect to seed broker, trying another broker from the list: Connection error: ","retryCount":1,"retryTime":484}
{"level":"ERROR","timestamp":"2025-11-24T01:36:29.279Z","logger":"kafkajs","message":"[Connection] Connection error: ","broker":"localhost:29092","clientId":"airbnb-backend","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)"}
{"level":"ERROR","timestamp":"2025-11-24T01:36:29.280Z","logger":"kafkajs","message":"[BrokerPool] Failed to connect to seed broker, trying another broker from the list: Connection error: ","retryCount":2,"retryTime":976}
{"level":"ERROR","timestamp":"2025-11-24T01:36:30.260Z","logger":"kafkajs","message":"[Connection] Connection error: ","broker":"localhost:29092","clientId":"airbnb-backend","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)"}
{"level":"ERROR","timestamp":"2025-11-24T01:36:30.261Z","logger":"kafkajs","message":"[BrokerPool] Failed to connect to seed broker, trying another broker from the list: Connection error: ","retryCount":3,"retryTime":2204}
{"level":"ERROR","timestamp":"2025-11-24T01:36:32.468Z","logger":"kafkajs","message":"[Connection] Connection error: ","broker":"localhost:29092","clientId":"airbnb-backend","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)"}
{"level":"ERROR","timestamp":"2025-11-24T01:36:32.469Z","logger":"kafkajs","message":"[BrokerPool] Failed to connect to seed broker, trying another broker from the list: Connection error: ","retryCount":4,"retryTime":4418}
{"level":"ERROR","timestamp":"2025-11-24T01:36:36.889Z","logger":"kafkajs","message":"[Connection] Connection error: ","broker":"localhost:29092","clientId":"airbnb-backend","stack":"AggregateError [ECONNREFUSED]: \n    at internalConnectMultiple (node:net:1134:18)\n    at afterConnectMultiple (node:net:1715:7)"}
{"level":"ERROR","timestamp":"2025-11-24T01:36:36.890Z","logger":"kafkajs","message":"[BrokerPool] Failed to connect to seed broker, trying another broker from the list: Connection error: ","retryCount":5,"retryTime":8202}
‚ö†Ô∏è Kafka producer failed to connect: Connection error: 

üöÄ Airbnb Backend Server Started Successfully!
üìç Server running on: http://localhost:3001
üåç Environment: development
üìä Health check: http://localhost:3001/health
‚è∞ Started at: 11/23/2025, 5:36:36 PM

